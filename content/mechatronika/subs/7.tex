\subsection{Ismertesse a diszkrét idejű konvolúció szerepét, összefüggését!}

\noindent \textbf{Konvolúció:}
\begin{itemize}
    \item bevezetünk ún. „egységnyi” jeleket – vizsgálójeleket
    \item ebből tudunk következtetni a rendszer tetszőleges bemenetre adott válaszára
    \item összetett bemenő jelek válaszának meghatározása komponensekre bontással:
    \begin{itemize}
        \item a bemenőjelet vizsgálójelekből álló komponensekre bontjuk
        \item meghatározzuk az elemi komponensek elemi hatását
        \item az időinvariancia és a szuperpozíció elvének kihasználásával az elemi hatásokat összegezzük
    \end{itemize}
    \item diszkrét idejű egységimpulzus:
    $$ \delta[k] = \begin{cases} 0 \text{ ha } k \neq 0 \\ 1 \text{ ha } k = 0 \end{cases} \quad k \in \mathbb{Z} $$
    \begin{itemize}
        \item eltolás esetén:
        $$ \delta[k-K] = \begin{cases} 0 \text{ ha } k \neq K \\ 1 \text{ ha } k = K \end{cases} \quad k, K \in \mathbb{Z} $$
        \item szorzás esetén
        $$ Y_0 \delta[k] = \begin{cases} 0 \text{ ha } k \neq 0 \\ Y_0 \text{ ha } k = 0 \end{cases} \quad k \in \mathbb{Z}, \quad Y_0 \in \mathbb{R} $$
    \end{itemize}
    \begin{figure}[H]
        \centering
        \begin{tikzpicture}[>=latex]
            \begin{axis}[
                width=6cm, height=4cm,
                axis lines=middle,
                ylabel={$\delta[k]$},
                xmin=-2.5, xmax=2.5,
                ymin=0, ymax=1.5,
                xtick={-2,-1,0,1,2},
                ytick={1},
                axis line style={->},
                every axis y label/.style={at={(current axis.north)}, anchor=south},
                xlabel style={at={(current axis.right of origin)}, anchor=north},
            ]
                \addplot[black, thick, ycomb, mark=*] coordinates {(-2,0) (-1,0) (0,1) (1,0) (2,0)};
                % Manual k label looking like a point
                \node[anchor=north] at (axis cs:2.4, 0) {$k$};
            \end{axis}
        \end{tikzpicture}
    \end{figure}

    \item diszkrét idejű egységugrás:
    $$ \varepsilon[k] = \begin{cases} 0 \text{ ha } k < 0 \\ 1 \text{ ha } k \geq 0 \end{cases} \quad k \in \mathbb{Z} $$
    \begin{itemize}
        \item eltolás esetén:
        $$ \varepsilon[k-K] = \begin{cases} 0 \text{ ha } k < K \\ 1 \text{ ha } k \geq K \end{cases} $$
        \item szorzás esetén:
        $$ Y_0 \varepsilon[k] = \begin{cases} 0 \text{ ha } k < 0 \\ Y_0 \text{ ha } k \geq 0 \end{cases} \quad k, K \in \mathbb{Z} \quad Y_0 \in \mathbb{R} $$
    \end{itemize}
    \begin{figure}[H]
        \centering
        \begin{tikzpicture}[>=latex]
            \begin{axis}[
                width=6cm, height=4cm,
                axis lines=middle,
                ylabel={$\varepsilon[k]$},
                xmin=-2.5, xmax=3.5,
                ymin=0, ymax=1.5,
                xtick={-2,-1,0,1,2,3},
                ytick={1},
                axis line style={->},
                every axis y label/.style={at={(current axis.north)}, anchor=south},
            ]
                \addplot[green, thick, dashed, ycomb, mark=o, mark options={solid, black, thick}] coordinates {(-2,0) (-1,0) (0,1) (1,1) (2,1) (3,1)};
                % Manual k label looking like a point
                \node[anchor=north] at (axis cs:3.4, 0) {$k$};
            \end{axis}
        \end{tikzpicture}
    \end{figure}

    \item amikor egy diszkrét idejű rendszernek a bemenő jele egy diszkrét idejű egységimpulzus, akkor a kimenő jelet súlyfüggvénynek (vagy impulzusválasznak) nevezzük
    \begin{itemize}
        \item jele: $w[k]$
    \end{itemize}
    \item vizsgálójelek alapösszefüggései:
    $$ \sum_{i=-\infty}^{\infty} \delta[i] = 1 $$
    \item belátható, hogy egy diszkrét idejű függvény konvolúciója az egységimpulzussal egy adott K érték mellett a függvény K helyen felvett értékét adja vissza
    $$ y[K] = \sum_{i=-\infty}^{\infty} y[i] \delta[K-i] = \sum_{i=-\infty}^{\infty} y[K-i] \delta[i] \quad K \in \mathbb{Z} $$
    \item az egységugrás értéke a k helyen kiszámolható az egységimpulzus függvényből
    $$ \varepsilon[k] = \sum_{i=-\infty}^{k} \delta[i] \quad k \in \mathbb{Z} $$
    \item az egységugrás két szomszédos helyen felvett értéknek különbsége megegyezik az egységimpulzus függvény megfelelő helyen felvett értékével
    $$ \delta[k] = \varepsilon[k] - \varepsilon[k-1] \quad k \in \mathbb{Z} $$
    \item egy diszkrét idejű rendszer kimenete k-adik időpillanatban a súlyfüggvénnyel és a bemenettel felírva:
    $$ y[k] = \sum_{i=0}^{k} w[k-i]u[i] \quad k \geq 0 $$
    \item mivel $w[k-i]u[i]$ az i-edik időpillanat bemenetének a kimenetre való hatása
    $$ u[k=K] = u[k=K]\delta[(k-K)=0] $$
    $$ y[k] = \sum_{i=0}^{k} w[k-i]u[i] \quad k > 0 $$
    
    \begin{figure}[H]
        \centering
        \begin{tikzpicture}[>=latex]
            \begin{axis}[
                width=10cm, height=6cm,
                axis lines=middle,
                xmin=-0.5, xmax=5.5,
                ymin=0, ymax=1.8,
                xtick={1, 4.5},
                xticklabels={$i$, $K$},
                ytick=\empty,
                axis line style={->},
                xlabel=\empty,
                ylabel=\empty,
                clip=false
            ]
                % Labels for axes/signals are floating in the image
                \node at (axis cs:-0.4, 1.6) {$u[k]$};
                \node at (axis cs:-0.2, 1.6) {$w[k]$};
                
                % Main impulse u[i] at i=1
                \addplot[green, dashed, thin, ycomb, mark=o, mark options={solid, black}] coordinates {(1,0.6)};
                \node[above] at (axis cs:1, 0.6) {$u[i]$};

                % Series of impulses
                % u[i]w[0] coincident with u[i] at i=1
                % We shift the label slightly or just point to the same impulse
                \node[right, font=\scriptsize] (w0) at (axis cs:1.3, 0.9) {$u[i]w[0]$};
                \draw[gray, thin] (w0) -- (axis cs:1.05, 0.65);

                 % u[i]w[1] at i+1 = 2
                \addplot[green, dashed, thin, ycomb, mark=o, mark options={solid, black}] coordinates {(2, 0.5)};
                \node[right, font=\scriptsize] (w1) at (axis cs:2.2, 0.8) {$u[i]w[1]$};
                \draw[gray, thin] (w1) -- (axis cs:2.05, 0.55);
                
                 % u[i]w[2] at i+2 = 3
                \addplot[green, dashed, thin, ycomb, mark=o, mark options={solid, black}] coordinates {(3, 0.4)};

                % Dots
                \node at (axis cs:3.7, 0.5) {$\dots$};

                 % u[i]w[K-i] at i+(K-i) = K = 4.5
                \addplot[green, dashed, thin, ycomb, mark=o, mark options={solid, black}] coordinates {(4.5, 0.3)};
                \node[above, font=\scriptsize] at (axis cs:4.5, 0.35) {$u[i]w[K-i]$};

            \end{axis}
        \end{tikzpicture}
    \end{figure}
\end{itemize}